{% extends "base.html" %}
{% load static %}

{% block title %}Genaigrader - Reevaluate{% endblock %}
{% block header %}Genaigrader - Reevaluate{% endblock %}

{% block extra_css %}
  <link rel="stylesheet" href="{% static 'css/reevaluate.css' %}">
{% endblock %}

{% block content %}
  <h2>Select Exam to Reevaluate</h2>
  <form id="reevaluate-form">
    {% csrf_token %}

    <!-- Existing exam selection -->
    <div class="form-section">
      <label for="exam-select">Existing exam:</label>
      <select id="exam-select" name="exam_id" required>
        {% for exam in exams %}
          <option value="{{ exam.id }}">{{ exam.course.name }} - {{ exam.description }}</option>
        {% endfor %}
      </select>
    </div>

    {% include "partials/model_select.html" %}

    <!-- Optional prompt -->
    <div class="form-section">
      <label for="user-prompt">Custom prompt:</label>
      <textarea id="user-prompt" name="user_prompt" placeholder="Write your prompt... (optional)" class="eval-user-prompt-fullwidth" rows="3"></textarea>
    </div>

    <button type="submit">Reevaluate Exam</button>
  </form>

  {% include "partials/loading_feedback.html" %}

  <div id="exam-results"></div>
  <div id="exam-details"></div>
{% endblock %}

{% block extra_scripts %}
  <script src="{% static 'js/evaluate_utils.js' %}"></script>
  <script src="{% static 'js/reevaluate.js' %}"></script>
{% endblock %}